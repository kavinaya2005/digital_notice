<!DOCTYPE html>
<html>
<head>
    <title>View Notices</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>


<div class="container">
   <h2>Live Notices</h2>
   
    <input 
        type="text" 
        id="searchBox" 
        placeholder="Search notices..." 
        onkeyup="searchNotices()">

    <div id="notices">
        {% if notices %}
            {% for n in notices %}
                <div class="notice-card" data-priority="{{ n.priority }}">
                    <h3>{{ n.title }}</h3>
                    <p>{{ n.content }}</p>
                    <small>
                        Category: {{ n.category }} |
                        Priority: {{ n.priority }} |
                        Target: {{ n.target }} |
                        Posted by: {{ n.posted_by }}
                    </small><br>

                    {% if n.file %}
                        <a href="{{ url_for('static', filename='uploads/' ~ n.file) }}" target="_blank">
                            View Attachment
                        </a>
                    {% endif %}

                    {% if session['role'] == 'Admin' or session['user'] == n.posted_by %}
                        <form action="{{ url_for('delete_notice', notice_id=n.id) }}" method="POST" style="display:inline;">
                            <button type="submit" onclick="return confirm('Are you sure you want to delete this notice?');">
                                Delete
                            </button>
                        </form>
                    {% endif %}

                    <hr>
                </div>
            {% endfor %}
        {% else %}
            <p>No notices posted yet.</p>
        {% endif %}
    </div>
    <button onclick="window.location.href='{{ url_for('dashboard') }}';" class="back-btn">â¬… Back</button>
</div>
    
    
</div>




<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
